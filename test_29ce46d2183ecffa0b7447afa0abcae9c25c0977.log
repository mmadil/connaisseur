Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.......................................................++++
..................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 14:57:49 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Failed to deny image signed with different key or failed with unexpected error. Output:
Error from server: admission webhook "connaisseur-svc.connaisseur.svc" denied the request: unknown error. please check the logs.
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................................................................++++
........................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:01:58 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............++++
....................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:05:26 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...................................................................................................................................................................................................................................................................................++++
....................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:10:42 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................................................................................................++++
...............................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:15:59 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............................................................................................................++++
............................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:22:04 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...++++
..............................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:31:06 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.........................++++
......................................................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:39:21 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................................++++
..........................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:46:58 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
............................................................................................................................................................++++
...............................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 15:58:29 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............................................................................................................................................................................................................................++++
..............................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:06:11 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................................................................++++
...................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:11:09 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.........++++
.........................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:19:26 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
..............................................++++
....................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:24:28 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................++++
......................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:37:46 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............................................++++
........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:42:41 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
................++++
..................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 16:51:12 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
error: timed out waiting for the condition on namespaces/connaisseur
make: *** [Makefile:31: uninstall] Error 1
Failed to uninstall Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.......................................................................................................................................++++
...........................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:05:06 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............................................................................++++
............................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:11:46 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
......++++
...........++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:15:57 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.......++++
.........................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:26:11 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................................................................++++
.................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
Error: release connaisseur failed, and has been uninstalled due to atomic being set: pods "connaisseur-bootstrap-sentinel" is forbidden: error looking up service account connaisseur/default: serviceaccount "default" not found
make: *** [Makefile:26: install] Error 1
Failed to install Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................................................................++++
.................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:44:31 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................++++
......................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:50:22 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
......................................................................................................................................................................................................................................................++++
....................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 17:59:22 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................++++
.....................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 18:08:22 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................................................................................................................................................++++
...............................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 18:14:42 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
......................................++++
......................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 18:29:30 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...................................................................................................................................................................................................................................................................................................................................................................................................................................................................++++
....................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 18:35:36 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................++++
....................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 18:47:32 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................................................................................................++++
...++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 18:50:34 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.........................................................++++
..........++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 19:00:50 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
error: timed out waiting for the condition on namespaces/connaisseur
make: *** [Makefile:31: uninstall] Error 1
Failed to uninstall Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.....................................................................................++++
...................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 19:20:01 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................++++
..............................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 19:28:09 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
..............................................++++
..........................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 19:38:53 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
........................................................................................................................................................................++++
................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 19:53:55 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
......................................++++
.............................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 20:01:03 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
..........................................................................................................................................................................................................................................................++++
...........................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 20:12:03 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
........++++
..........................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 20:21:31 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
........................++++
.........................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 20:45:21 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.................................................................................................................................++++
.....................................................................................................................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 20:53:31 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.................................................................................++++
...................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 21:11:36 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.................................++++
..++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 21:24:58 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................................++++
...............................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 21:31:59 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.......................................++++
...........................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 21:38:40 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.....................++++
.....++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 21:59:10 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................................................................++++
.....++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 22:05:17 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
..........................................................................................++++
.........................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 22:16:42 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Failed to deny unsigned image or failed with unexpected error. Output:
Error from server (InternalError): Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": dial tcp 10.96.207.208:443: connect: connection refused
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................................................................................................................++++
......................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 22:27:41 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
error: timed out waiting for the condition on namespaces/connaisseur
make: *** [Makefile:31: uninstall] Error 1
Failed to uninstall Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............................................................................................................................................................................++++
..................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Fri May  7 22:47:19 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": context deadline exceeded
