Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
..++++
................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
Error: an error occurred while uninstalling the release. original install error: pods "connaisseur-bootstrap-sentinel" is forbidden: error looking up service account connaisseur/default: serviceaccount "default" not found: timed out waiting for the condition
make: *** [Makefile:26: install] Error 1
Failed to install Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................................++++
............................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:05:27 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............................++++
.....................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:09:33 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................++++
.....................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:12:25 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................++++
...........................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:15:26 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.............++++
.......................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:18:35 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": net/http: request canceled (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................................................................................++++
........++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:21:30 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": net/http: request canceled (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................++++
........................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:24:44 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
........................................................................................................++++
.....................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:27:36 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": net/http: request canceled (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................................................................++++
................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:30:46 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...................................++++
.................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:33:54 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Allowed an unsigned image via init container or failed due to an unexpected error handling init containers. Output:
Error from server (InternalError): error when creating "connaisseur/tests/integration/valid_container_with_unsigned_init_container_image.yml": Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": net/http: request canceled (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
............++++
........................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:36:35 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...........................................................................................................................................................................++++
.......................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:39:47 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................++++
...............................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:42:35 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
..................++++
..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:45:49 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.........................................++++
.............................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:48:36 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
............++++
.............................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:51:47 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................................................................................................................................................................................................................................................++++
...................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:54:56 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
...............................................................................++++
......++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 12:57:51 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
......................++++
......................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:00:34 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
error: timed out waiting for the condition on namespaces/connaisseur
make: *** [Makefile:31: uninstall] Error 1
Failed to uninstall Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
....................................................................................................++++
.............................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:04:14 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
........................................................................................................................................................................................................................................++++
................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:06:35 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.++++
............++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:08:52 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Failed to deny unsigned image or failed with unexpected error. Output:
Error from server (InternalError): Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": context deadline exceeded
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
............................++++
.........................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:10:34 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
error: timed out waiting for the condition on namespaces/connaisseur
make: *** [Makefile:31: uninstall] Error 1
Failed to uninstall Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.......................................................................................................++++
.................................................................................................................................................................................................................................................................................................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:14:15 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Failed to deny unsigned image or failed with unexpected error. Output:
Error from server (InternalError): Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": dial tcp 10.96.43.11:443: i/o timeout
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.........++++
.........................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:16:39 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
error: timed out waiting for the condition on namespaces/connaisseur
make: *** [Makefile:31: uninstall] Error 1
Failed to uninstall Connaisseur
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
......................................++++
.........................................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:20:11 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.................++++
.......................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:22:48 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.................................++++
....................................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:25:44 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Failed to allow signed image. Output:
Error from server (InternalError): Internal error occurred: failed calling webhook "connaisseur-svc.connaisseur.svc": Post "https://connaisseur-svc.connaisseur.svc:443/mutate?timeout=30s": net/http: request canceled (Client.Timeout exceeded while awaiting headers)
Preparing Connaisseur config...
Config set
Installing Connaisseur...
bash helm/certs/gen_certs.sh
Generating RSA private key, 4096 bit long modulus (2 primes)
.................................................................................................++++
...............................................................++++
e is 65537 (0x010001)
Signature ok
subject=CN = connaisseur-svc.connaisseur.svc
Getting Private key
kubectl create ns connaisseur || true
namespace/connaisseur created
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
#
#=============================================
#
# The installation may last up to 5 minutes.
#
#=============================================
#
helm install connaisseur helm --atomic
NAME: connaisseur
LAST DEPLOYED: Tue Apr 13 13:29:13 2021
NAMESPACE: connaisseur
STATUS: deployed
REVISION: 1
TEST SUITE: None
Successfully installed Connaisseur
Testing unsigned image...
Successfully denied usage of unsigned image
Testing image signed under different key...
Successfully denied usage of image signed under different key
Testing signed image...
Successfully allowed usage of signed image
Testing deployment of unsigned init container along with a valid container...
Successfully denied unsigned image in init container
Uninstalling Connaisseur...
kubectl config set-context --current --namespace connaisseur
Context "kind-kind" modified.
helm uninstall connaisseur
release "connaisseur" uninstalled
kubectl delete ns connaisseur --timeout=120s
namespace "connaisseur" deleted
Successfully uninstalled Connaisseur
Passed integration test
